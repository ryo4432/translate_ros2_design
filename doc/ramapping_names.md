元の文書  
https://design.ros2.org/articles/static_remapping.html

# 名前のリマッピング

トピックやパラメータ，サービスは名前によって一意に定まります。名前はROSノード内でハードコードされますが，それらはリマッピング機能を通して実行時に変更できます。リマッピングがなければ，ノードのインスタンスはコード内で変更を要求します。この記事はROS2におけるリマッピングの仕様，根拠およびメカニズムについて説明します。

## なぜ名前を再配置(リマップ)するのか

名前の再配置は異なるシステムにおいて同じノードを再利用できるようにするためのものです。あるロボットが似たタイプのセンサを複数持っていると，そのロボットは異なるトピックへとリマップしたセンサ出力のある同じノードの複数インスタンスを起動します。


## 名前の構造
名前の完全な定義は[こちら](http://design.ros2.org/articles/topic_and_service_names.html)に記載しています。この記事を読む前にリンク先を読んでおくべきです。

### 簡単なまとめ
`/`から始まる名前は「完全修飾名(FQN)」，そうでない場合は「相対名」と呼ばれます。スラッシュ間の文字列はトークンと呼びます。名前は概念上2つの要素に分かれます。「名前空間」と「ベース名」です。ベース名は名前の最後のトークンです。名前空間はベース名の前にある文字列すべてです。

### 名前の例
- `/foo`
- `/foo/bar`
- `~/foo/bar`
- `{node}/bar`
- `bar`

## リマッピングルールの構造

リマッピング操作はノードが使用する名前をどのように変更すべきかを説明する指標です。リマッピング操作には2つの要素があります。1つ目はその操作が名前に対して適用できるかどうかを判断するために使われます。2つ目は一致する名前との入れ替えです。ある名前を別の名前と入れ替える行為が「リマッピング」です。

## ROS2におけるリマッピングのユースケース

次のユースケースはROS2におけるリマッピングのために考えられているものです。

- プロセス内の1つのノードをリマップする。
- 名前空間を変更する。
- ベース名を変更する。
- トークンを変更する。
- 定義済みFQNをリマップする。
- 厳密なFQNを取り替える。
- 厳密な相対名を取り替える。
- コマンドラインを介してリマップする。
- デフォルトの名前空間を変更する。
- ノード名を変更する。
- トピックとサービス名を別々にリマップする。

### プロセス内の1つのノードをリマップする

これは1つのプロセスの1つのノードに対して，ほかのノードへの影響なく，リマップ操作を適用する機能のことです。ROS2におけるプロセスは複数のノードを含むことができるので，1つのプロセスにおける複数のノードが異なる目的で同じ名前を使用する可能性があります。ユーザーは停止することなく，1つのノードに使われている名前を変更したいかもしれません。

### 名前空間を変更する

ノードは名前空間にある，またはデフォルトの名前空間を持っていると言われています。この名前空間はノードによって使用されているすべての相対名を先頭に追加します。このユースケースは1つの操作で複数の名前空間を変更する機能があります。

人気のROS1パッケージ[actionlib](wiki.ros.org/actionlib)は同じ名前空間に5つのトピックを生成します。ROS1のactionlibのクライアントまたはサーバーをリマッピングするということは5つのリマッピング操作を生成することを意味します。ROS2ではすべてのリマップ操作を1回で済ませることができます。

例：
- ノードはactionlibサーバ`move_head`を提供し，`move_head`と呼ばれるパラメータをチェックします。
- リマップ操作は名前空間である`move_head`と`move_head_check_collision`を入れ替えます。
- 5つすべてのactionlibトピックは`/move_head_check_collision`にリマップされますが，パラメータ名は変更されないままです。

### ベース名を変更する

これは1つの操作で複数のベース名を変更できる機能です。ユーザーは1つのベース名をもつ複数のインスタンスを別のトークへと変更できるようになります。

例：
- あるノードは`/scan/head/scan`と`/base/scan`という名前を持っている。
- ユーザーはいくつかのノードを起動した後，そのノードに同じデータをサブスクライブさせたい。
- ユーザーはベース名である`scan`を`scan_filtered`にリマップする。
- 最終的なトピックは`/scan/head/scan_filtered`と`/base/scan_filtered`となる。

### トークンを変更する

これはトークンがどこにあろうとも，複数の名前のトークンを変更する機能です。トークンはインターフェイスを通して使用される可能性がありますが，エンドユーザーにとっては望ましくありません。これはこのトークンのすべての使用を取り替える操作を可能にすることを意味します。

例：
- ある会社がROS2ドライバーのある汎用移動ロボットベースを売り出しています。
- ロボットベースのドライバーはその中に`UmbrellaCorp`のような会社名をたくさん使っています。
- ほかの会社はロボットベースを製品に組み込み，その会社のお客様はROS2のインターフェイスを利用したいです。
- 2つ目の会社は彼らのインターフェイスに`UmbrellaCorp`を含ませたくまりません。そこで彼らはドライバーを起動するときにトークンを`moble_base`にリマップします。

### 定義済みFQNをリマップする